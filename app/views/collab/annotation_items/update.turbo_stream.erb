<%= turbo_stream.replace(dom_id(@annotation_item)) do %>
  <%= render(Collab::AnnotationItems::FormComponent.new(annotation_item: @annotation_item, units: @units, collaborator: current_collaborator, selected: true)) %>
<% end %>
<%= turbo_stream.replace(dom_id(@annotation, :totals)) do %>
  <%= render("collab/annotations/totals", annotation: @annotation) %>
<% end %>
<%= turbo_stream.replace(dom_id(@annotation, :canvas)) do %>
  <%=
    render(Collab::Annotations::CanvasComponent.new(
      annotation: @annotation,
      annotation_item: @annotation_item,
      annotation_items: @annotation_items
    ))
  %>
<% end %>
<%= turbo_stream.replace(dom_id(@annotation, :hide_polygons)) do %>
  <%= render("collab/annotations/hide_polygons_link", annotation: @annotation) %>
<% end %>
<%= turbo_stream.append(dom_id(@annotation_item)) do %>
  <template
    data-controller="annotation-items--select"
    data-annotation-items--select-annotation-outlet="[data-controller='annotation']"
    data-annotation-items--select-id-value="<%= @annotation_item.id %>">
  </template>
<% end %>
<%= turbo_stream.append(dom_id(@annotation)) do %>
  <template data-controller="focus"></template>
<% end %>
<%= turbo_stream.update("flash_messages") do %>
  <%= render(FlashComponent.with_collection(flash.to_a)) %>
<% end %>
